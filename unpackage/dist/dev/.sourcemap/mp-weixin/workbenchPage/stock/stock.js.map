{"version":3,"sources":["uni-app:///main.js","webpack:///E:/桌面/菜商宝小程序/farm/workbenchPage/stock/stock.vue?f51e","webpack:///E:/桌面/菜商宝小程序/farm/workbenchPage/stock/stock.vue?0669","webpack:///E:/桌面/菜商宝小程序/farm/workbenchPage/stock/stock.vue?c596","webpack:///E:/桌面/菜商宝小程序/farm/workbenchPage/stock/stock.vue?947e","uni-app:///workbenchPage/stock/stock.vue","webpack:///E:/桌面/菜商宝小程序/farm/workbenchPage/stock/stock.vue?73fe"],"names":["createPage","Page","renderjs","component","options","__file","components","comboxList","gUpload","uniIcons","uniCombox","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBAAmB,8BACnB,sBACA,kD,mDACAA,EAAWC,a;;;;2DCHX,6SACIC,EADJ,iHASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,gCACZ,aAAAF,E;;;;2GCvBf,8zB;;;;2GCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,WAAY,WACV,OAAO,qKAITC,QAAS,WACP,OAAO,mJAITC,SAAU,WACR,OAAO,6LAITC,UAAW,WACT,OAAO,gKAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DChDvB,seAA+mB,eAAG,G;;;;0ICkGlnB,uCAIA,GACA,YACA,QACA,UACA,cACA,iBACA,mB,EAEA,CACA,KADA,WAEA,OACA,aACA,wBACA,6BAMA,cACA,2BACA,WACA,gBACA,aACA,gBACA,YACA,YACA,YACA,aACA,6CAGA,OAxBA,WAyBA,oBACA,wBAGA,SACA,cADA,SACA,GACA,eACA,mBAMA,gBATA,WASA,WACA,gDACA,0BACA,0BAEA,iCACA,uCACA,4CAIA,aApBA,SAoBA,cACA,OACA,2BACA,6DACA,eACA,iCACA,4DAEA,6CACA,4CAcA,6BACA,4CAEA,2BAEA,aAhDA,SAgDA,GACA,WACA,eACA,mBACA,4BACA,QAFA,SAEA,GAGA,OAFA,eACA,yCACA,YACA,OACA,sBACA,yBACA,MACA,OACA,wBACA,iBACA,WAKA,WArEA,SAqEA,GACA,WACA,mBACA,uBACA,QAFA,SAEA,GACA,eAEA,+CAKA,eAjFA,WAkFA,qCAEA,eApFA,SAoFA,GACA,4BAOA,WA5FA,SA4FA,KACA,4BACA,yBACA,0BACA,wBAGA,YAnGA,SAmGA,GACA,8BACA,wDAEA,wBAOA,UA9GA,SA8GA,KACA,4BACA,0BACA,4BAIA,kBArHA,SAqHA,KAGA,WAxHA,SAwHA,GACA,eACA,oDAGA,QA7HA,WA8HA,aACA,WACA,yBAGA,OAnIA,WAmIA,WAEA,uBAOA,qBAOA,6BAOA,wCAEA,OADA,wBACA,qDAGA,GADA,eACA,GAIA,WACA,GACA,wBACA,6BAEA,GACA,YACA,0BACA,2BAEA,4BACA,4BACA,eAEA,WACA,6DACA,cACA,gBACA,QACA,kCACA,mDAEA,OACA,QATA,SASA,GACA,eACA,yBACA,gBACA,aACA,iBAEA,eACA,uBACA,cACA,+CAEA,MAEA,gBACA,aACA,WACA,gCA3CA,oBAZA,aACA,WACA,uBATA,aACA,WACA,yBATA,aACA,WACA,sB;;;;2DCnRA,81BAAyoC,eAAG,G","file":"workbenchPage/stock/stock.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './workbenchPage/stock/stock.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./stock.vue?vue&type=template&id=2a0b58c4&scoped=true&\"\nvar renderjs\nimport script from \"./stock.vue?vue&type=script&lang=js&\"\nexport * from \"./stock.vue?vue&type=script&lang=js&\"\nimport style0 from \"./stock.vue?vue&type=style&index=0&id=2a0b58c4&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a0b58c4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"workbenchPage/stock/stock.vue\"\nexport default component.exports","export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./stock.vue?vue&type=template&id=2a0b58c4&scoped=true&\"","var components\ntry {\n  components = {\n    comboxList: function() {\n      return import(\n        /* webpackChunkName: \"components/combox-list/combox-list\" */ \"@/components/combox-list/combox-list.vue\"\n      )\n    },\n    gUpload: function() {\n      return import(\n        /* webpackChunkName: \"components/g-upload/g-upload\" */ \"@/components/g-upload/g-upload.vue\"\n      )\n    },\n    uniIcons: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-icons/uni-icons\" */ \"@/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    uniCombox: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-combox/uni-combox\" */ \"@/components/uni-combox/uni-combox.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./stock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./stock.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"stock-page\">\r\n\t\t<view class=\"basic-info\">\r\n\t\t\t<view class=\"form-item border\">\r\n\t\t\t\t<!-- <view class=\"label\">\r\n\t\t\t\t\t<text>供货商：</text>\r\n\t\t\t\t</view> -->\r\n\t\t\t\t<!-- <picker mode=\"selector\" :range=\"supplierList\" range-key=\"supplier_name\" @change=\"bindSupplierChange\" class=\"picker\">\r\n\t\t\t\t\t<input class=\"uni-input\" v-model=\"form.supplier\" type=\"text\" disabled placeholder-class=\"placeholder-color\"\r\n\t\t\t\t\t placeholder=\"请选择供货商\">\r\n\t\t\t\t</picker> -->\r\n\t\t\t\t<!-- <uni-icons class=\"input-arrow\" type=\"arrowdown\" size=\"14\"></uni-icons> -->\r\n\t\t\t\t\r\n\t\t\t\t<combox-list labelWidth=\"180rpx\" placeholder=\"请输入并选择供货商\" label=\"供货商：\" :candidates=\"supplierList\"\r\n\t\t\t\t :supplierData=\"supplierData\" @getSupplierId='getSupplierId' emptyTips=\"暂无该供应商\">\r\n\t\t\t\t</combox-list>\r\n\t\t\t\t\r\n\t\t\t</view>\r\n\t\t\t<view class=\"form-item border\">\r\n\t\t\t\t<view class=\"label\">\r\n\t\t\t\t\t<text>进货单号：</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<input v-model=\"order_id\" class=\"uni-input\" placeholder-class=\"placeholder-color\" type=\"text\" placeholder=\"请输入运货单号\">\r\n\t\t\t</view>\r\n\t\t\t<!-- 上传凭证 -->\r\n\t\t\t<g-upload class=\"mb20\" ref='gUpload' uploadText=\"上传凭证\" :mode=\"imgList\" @chooseFile='chooseFile' @imgDelete='imgDelete'></g-upload>\r\n\r\n\t\t</view>\r\n\r\n\t\t<!-- 商品添加 -->\r\n\t\t<view class=\"goods\" v-for=\"(item, index) in goodsList\" :key=\"index\">\r\n\t\t\t<view class=\"title\">\r\n\t\t\t\t<text>商品{{index+1}}</text>\r\n\t\t\t\t<uni-icons v-if=\"goodsList.length > 1\" type=\"trash\" size=\"18\" color=\"#666\" @click=\"dleGoodsHandle(index)\"></uni-icons>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"basic-info\">\r\n\t\t\t\t<uni-combox @getGoodsId=\"getGoodsId\" @loadMore=\"loadMore\" v-model=\"item.goods_id\" class=\"border\" labelWidth=\"180rpx\"\r\n\t\t\t\t required placeholder=\"请输入并选择商品\" label=\"商品名称：\" :candidates=\"queryList\" :goodsData=\"goodsData\" emptyTips=\"暂无该商品\">\r\n\t\t\t\t</uni-combox>\r\n\r\n\t\t\t\t<view class=\"form-item quxing border\">\r\n\t\t\t\t\t<view class=\"label\">\r\n\t\t\t\t\t\t<text>计价方式：</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<input v-model=\"pricingMethod[item.pricing_method]\" disabled placeholder-class=\"placeholder-color\" class=\"uni-input\"\r\n\t\t\t\t\t type=\"text\" placeholder=\"请选择计价方式\" @click=\"selectMethod(index)\">\r\n\t\t\t\t\t<uni-icons class=\"input-arrow\" type=\"arrowdown\" size=\"14\"></uni-icons>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"form-item quxing border\">\r\n\t\t\t\t\t<view class=\"label\">\r\n\t\t\t\t\t\t<text>进货单位：</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<input v-model=\"item.unit\" disabled placeholder-class=\"placeholder-color\" class=\"uni-input\" type=\"text\"\r\n\t\t\t\t\t placeholder=\"请选择单位\" @click=\"selectUnit(index)\">\r\n\t\t\t\t\t<uni-icons class=\"input-arrow\" type=\"arrowdown\" size=\"14\"></uni-icons>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"form-item border\">\r\n\t\t\t\t\t<view class=\"label\">\r\n\t\t\t\t\t\t<text>进货数量：</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<input v-model=\"item.amount\" placeholder-class=\"placeholder-color\" class=\"uni-input\" type=\"digit\" placeholder=\"请输入进货数量\">\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"form-item quxing border\">\r\n\t\t\t\t\t<view class=\"label\">\r\n\t\t\t\t\t\t<text>进货单价：</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<input v-model=\"item.unit_price\" placeholder-class=\"placeholder-color\" class=\"uni-input\" type=\"digit\" placeholder=\"请输入进货单价\">\r\n\t\t\t\t\t<view class=\"mark-right\">元</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<view class=\"label\">\r\n\t\t\t\t\t\t<text>进货日期：</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<picker mode=\"date\" @change=\"bindDateChange($event, item)\" class=\"picker\">\r\n\t\t\t\t\t\t<input class=\"uni-input\" v-model=\"date1\" type=\"text\" disabled placeholder-class=\"placeholder-color\" placeholder=\"请选择进货时间\">\r\n\t\t\t\t\t</picker>\r\n\t\t\t\t\t<uni-icons class=\"input-arrow\" type=\"arrowdown\" size=\"14\"></uni-icons>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 商品添加 -->\r\n\t\t<view class=\"addGoodsBtn\" @click=\"addGoodsHandle\">\r\n\t\t\t<uni-icons type=\"plus\" size=\"20\" color=\"#666\" class=\"icon\"></uni-icons>\r\n\t\t\t<text class=\"txt\">新增商品</text>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"uplaod\" @click=\"upload\">\r\n\t\t\t<text class=\"txt\">进货</text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tclone\r\n\t} from \"../../util/commonly\"\r\n\r\n\tlet goodsItem = {\r\n\t\tgoods_id: '',\r\n\t\tunit: '',\r\n\t\tamount: '',\r\n\t\tunit_price: '',\r\n\t\tpurchase_date: \"\",\r\n\t\tpricing_method: ''\r\n\t}\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tqueryList: [],\r\n\t\t\t\tunitList: ['斤', 'kg', '件'],\r\n\t\t\t\tpricingMethod: [\"\", '计重', '计件'],\r\n\t\t\t\t// form: {\r\n\t\t\t\t// \torder: '',\r\n\t\t\t\t// \tsupplier: '',\r\n\t\t\t\t// \tsupplier_id: '',\r\n\t\t\t\t// },\r\n\t\t\t\tsupplierId:'',\r\n\t\t\t\tgoodsList: [clone(goodsItem)],\r\n\t\t\t\timgList: [],\r\n\t\t\t\tsupplierList: [],\r\n\t\t\t\tgoodsData: [],\r\n\t\t\t\tsupplierData: [],\r\n\t\t\t\tpage_size: 0,\r\n\t\t\t\tgoods_id: '',\r\n\t\t\t\torder_id: '',\r\n\t\t\t\tbase64Arr: [],\r\n\t\t\t\tdate1: new Date().toISOString().slice(0, 10),\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.getGoodsData()\r\n\t\t\tthis.getSupplierList()\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tgetSupplierId(supplierId) {\r\n\t\t\t\tconsole.log(supplierId)\r\n\t\t\t\tthis.supplierId = supplierId\r\n\t\t\t},\r\n\t\t\t// 下拉加载更多，暂时不需要\r\n\t\t\t// loadMore(n) {\r\n\t\t\t// \tthis.getGoodsData(n)\r\n\t\t\t// },\r\n\t\t\tgetSupplierList() {\r\n\t\t\t\tthis.myRequest('/merchant-staff/show-supplier', {\r\n\t\t\t\t\tpage_size: this.page_size\r\n\t\t\t\t}, \"POST\").then(res => {\r\n\t\t\t\t\t// console.log(res)\r\n\t\t\t\t\tthis.supplierData = res.data.data.items\r\n\t\t\t\t\tres.data.data.items.forEach((item) => {\r\n\t\t\t\t\t\tthis.supplierList.push(item.supplier_name)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetGoodsData(n) {\r\n\t\t\t\tlet that = this;\t\t\t\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.myRequest(\"/goods/get-all-goods\",\"POST\").then(res => {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tres.data.data.forEach((item) => {\r\n\t\t\t\t\t\t\tthat.goodsData.push.apply(that.goodsData, item.goods_type.goods_list)\r\n\t\t\t\t\t\t\t// console.log(that.goodsData)\r\n\t\t\t\t\t\t\titem.goods_type.goods_list.forEach(it => {\r\n\t\t\t\t\t\t\t\tthat.queryList.push(it.goods_name)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// bindSupplierChange: function(e) {\r\n\t\t\t// \tconsole.log(e)\r\n\t\t\t// \tconsole.log('picker发送选择改变，携带值为', e.target)\r\n\t\t\t// \tlet index = e.target.value;\r\n\t\t\t// \tthis.form.supplier = this.supplierList[index].supplier_name\r\n\t\t\t// \tthis.form.supplier_id = this.supplierList[index].supplier_id\r\n\t\t\t// \tconsole.log(this.form)\r\n\t\t\t// },\r\n\t\t\tbindDateChange: function(e, item) {\r\n\t\t\t\tconsole.log('picker发送选择改变，携带值为', e.target, item)\r\n\t\t\t\t// item.purchase_date = e.target.value;\r\n\t\t\t\tthis.date1 = e.target.value;\r\n\t\t\t},\r\n\t\t\tselectMethod(idx) {\r\n\t\t\t\tlet _that = this;\r\n\t\t\t\tconsole.log(idx)\r\n\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\titemList: this.pricingMethod,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t_that.goodsList[idx].pricing_method = res.tapIndex\r\n\t\t\t\t\t\tswitch (res.tapIndex) {\r\n\t\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\t\t_that.unitList = ['斤', 'kg']\r\n\t\t\t\t\t\t\t\t_that.goodsList[idx].unit = 'kg'\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t_that.goodsList[idx].unit = '件'\r\n\t\t\t\t\t\t\t\t_that.unitList = ['件']\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tselectUnit(idx) {\r\n\t\t\t\tlet _that = this;\r\n\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\titemList: this.unitList,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t// _that.goodsList[idx].unit = res.tapIndex\r\n\t\t\t\t\t\t_that.goodsList[idx].unit = _that.unitList[res.tapIndex]\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\taddGoodsHandle() {\r\n\t\t\t\tthis.goodsList.push(clone(goodsItem))\r\n\t\t\t},\r\n\t\t\tdleGoodsHandle(idx) {\r\n\t\t\t\tthis.goodsList.splice(idx, 1)\r\n\t\t\t},\r\n\t\t\t/*\r\n\t\t\t上传后返回的值：\r\n\t\t\tlist：上传后图片数组\r\n\t\t\tv：返回当前上传图片的临时路径\r\n\t\t\t*/\r\n\t\t\tchooseFile(list, v) {\r\n\t\t\t\tconsole.log(\"上传图片_list：\", list)\r\n\t\t\t\tconsole.log(\"上传图片_v：\", v);\r\n\t\t\t\tthis.uploadFileToServe(v)\r\n\t\t\t\tthis.urlTobase64(v[0])\r\n\r\n\t\t\t},\r\n\t\t\turlTobase64(url) {\r\n\t\t\t\tconsole.log('调用了urlTobase64')\r\n\t\t\t\tlet base64 = uni.getFileSystemManager().readFileSync(url, \"base64\")\r\n\t\t\t\t// console.log(base64)\r\n\t\t\t\tthis.base64Arr.push(base64)\r\n\t\t\t},\r\n\t\t\t/*\r\n\t\t\t删除图片：\r\n\t\t\tlist：删除返回删除后剩余的图片数组\r\n\t\t\teq：返回删除的数组\r\n\t\t\t*/\r\n\t\t\timgDelete(list, eq) {\r\n\t\t\t\tconsole.log(\"删除图片_list：\", list)\r\n\t\t\t\tconsole.log(\"删除图片_eq：\", eq)\r\n\t\t\t\tthis.base64Arr.splice(eq,1)\r\n\t\t\t\t// console.log(this.base64Arr)\r\n\t\t\t},\r\n\t\t\t/* 上传图片到服务器 */\r\n\t\t\tuploadFileToServe(v) {\r\n\r\n\t\t\t},\r\n\t\t\tgetGoodsId(goods_id) {\r\n\t\t\t\tconsole.log(goods_id)\r\n\t\t\t\tthis.goodsList[this.goodsList.length - 1].goods_id = goods_id\r\n\r\n\t\t\t},\r\n\t\t\tchecked() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: \"提示\",\r\n\t\t\t\t\tcontent: \"请检查信息是否填写完善\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tupload() {\r\n\t\t\t\t// console.log(this.order_id, this.supplierId, this.base64Arr)\r\n\t\t\t\tif (this.supplierId == '') {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle:\"提示\",\r\n\t\t\t\t\t\tcontent:'请选择供货商'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (this.order_id == '') {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle:\"提示\",\r\n\t\t\t\t\t\tcontent:'请选择进货单号'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (this.base64Arr.length == 0) {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle:\"提示\",\r\n\t\t\t\t\t\tcontent:'请上传凭证'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet flag = this.goodsList.every(item => {\r\n\t\t\t\t\titem.purchase_date = this.date1\r\n\t\t\t\t\treturn item.goods_id != \"\" && item.amount != \"\" && item.purchase_date != \"\"\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(flag)\r\n\t\t\t\tif (!flag) {\r\n\t\t\t\t\tthis.checked()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet that = this\r\n\t\t\t\tlet batch_inf = {\r\n\t\t\t\t\tbatch_num: this.order_id,\r\n\t\t\t\t\tsupplier_id: this.supplierId,\r\n\t\t\t\t}\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tbatch_inf: batch_inf,\r\n\t\t\t\t\tbatch_pics: this.base64Arr,\r\n\t\t\t\t\tgoods_list: this.goodsList,\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(this.goodsList)\r\n\t\t\t\tconsole.log(this.base64Arr)\r\n\t\t\t\tconsole.log(obj)\r\n\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: \"https://api.juleikeji.com/stock/add-purchase-and-stock\",\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\tdataType: \"JSON\",\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'content-type': 'application/json', // 默认值\r\n\t\t\t\t\t\t\"Authorization\": 'Bearer ' + uni.getStorageSync('token')\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdata: obj,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tlet data = JSON.parse(res.data)\r\n\t\t\t\t\t\tif (data.status == 200) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: \"商品进货成功\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthat.goodsList = []\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\turl: \"/goodsPage/goodsLibrary/goodsLibrary\"\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}, 500)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (data.status == 1001) {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: \"提示\",\r\n\t\t\t\t\t\t\t\tcontent: \"批次已存在请勿重复添加\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t/deep/ .placeholder-color {\r\n\t\tcolor: $uni-text-color-placeholder;\r\n\t}\r\n\r\n\t.mb20 {\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\r\n\t.stock-page {\r\n\t\tpadding: 20rpx 20rpx 30rpx;\r\n\r\n\t\t.label {\r\n\t\t\twidth: 180rpx;\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tcolor: $uni-color-subtitle;\r\n\t\t}\r\n\r\n\t\t.border {\r\n\t\t\tborder-bottom: 1rpx solid #ddd;\r\n\t\t}\r\n\r\n\t\t.form-item {\r\n\t\t\tposition: relative;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\theight: $inputH;\r\n\t\t\tpadding: $inputPadding;\r\n\r\n\t\t\t&::before {\r\n\t\t\t\tcontent: \"*\";\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 4px;\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tcolor: $uni-color-error;\r\n\t\t\t}\r\n\r\n\t\t\t.picker {\r\n\t\t\t\tflex: 1;\r\n\t\t\t}\r\n\r\n\t\t\t.uni-input {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\theight: $inputH;\r\n\t\t\t\tline-height: $inputH;\r\n\t\t\t\tfont-size: 16px;\r\n\t\t\t}\r\n\r\n\t\t\t.input-arrow {\r\n\t\t\t\tpadding: 10px;\r\n\t\t\t}\r\n\r\n\t\t\t.mark-right {\r\n\t\t\t\tpadding-right: 10px;\r\n\t\t\t\tfont-size: 16px;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.quxing {\r\n\t\t\t&::before {\r\n\t\t\t\tcontent: \"\";\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 4px;\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tcolor: $uni-color-error;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.basic-info {\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-radius: $borderRadius16;\r\n\t\t\tpadding: 10rpx 10rpx 10rpx 20rpx;\r\n\t\t\tmargin-bottom: 20rpx;\r\n\t\t}\r\n\r\n\t\t.goods {\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-radius: $borderRadius16;\r\n\r\n\t\t\t.title {\r\n\t\t\t\theight: 100rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding-left: 30rpx;\r\n\t\t\t\tpadding-right: 20rpx;\r\n\t\t\t\tborder-bottom: 1rpx solid #ddd;\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* 添加商品按钮 */\r\n\t\t.addGoodsBtn {\r\n\t\t\theight: 100rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tmargin-bottom: 30rpx;\r\n\t\t\tbackground-color: #FFFFFF;\r\n\t\t\tborder-radius: $borderRadius16;\r\n\r\n\t\t\t.icon {\r\n\t\t\t\tmargin-top: 2px;\r\n\t\t\t}\r\n\r\n\t\t\t.txt {\r\n\t\t\t\tmargin-left: 6rpx;\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tcolor: #666;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.uplaod {\r\n\t\t\tline-height: 86rpx;\r\n\t\t\tmargin-bottom: 50rpx;\r\n\t\t\ttext-align: center;\r\n\t\t\tcolor: #fff;\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tbackground-image: $backGroundGradient;\r\n\t\t\tborder-radius: 43rpx;\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./stock.vue?vue&type=style&index=0&id=2a0b58c4&scoped=true&lang=scss&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./stock.vue?vue&type=style&index=0&id=2a0b58c4&scoped=true&lang=scss&\""],"sourceRoot":""}